<!DOCTYPE html>
<html>

<head>
	{% if title %}
	<title>{{ title }} - Keyence Vision System</title>
	{% else %}
	<title>Keyence Vision System</title>
	{% endif %}

	<meta name='viewport'
	content='user-scalable=yes, initial-scale=1, minimum-scale=1, width=device-width, height=device-height'>

	<!-- Favicon and Icons -->
	<link rel='apple-touch-icon" sizes="120x120" href="{{ url_for('static', filename='res/apple-touch-icon.png') }}">
	<link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='res/favicon-32x32.png') }}">
	<link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='res/favicon-16x16.png') }}">
	<link rel="manifest" href="{{ url_for('static', filename='res/site.webmanifest') }}">
	<link rel="mask-icon" href="{{ url_for('static', filename='res/safari-pinned-tab.svg') }}" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#da532c">
	<meta name="theme-color" content="#ffffff">
	
	<!-- Fonts -->
	<link rel='stylesheet' type='text/css'
	href="{{ url_for('static', filename='styles/fonts.css') }}">
	
	<!-- CSS -->
	<link rel='stylesheet' type='text/css'
	href="{{ url_for('static', filename='styles/default-style.css') }}">

	<!-- Script -->
	{% if not no_header %}
	<script src="{{ url_for('static', filename='src/js/status-bar.js') }}" defer></script>
	{% endif %}
</head>

<body>

	{% if not no_header %}

	<!-- Checkbox to open/close navbar -->
	<input type='checkbox' id='nav-btn' {% if nav_closed %}checked{% endif %}/>

	<!-- Navbar -->
	<header id='navbar'>
		<div id='navbar-content'>

			<!-- Navbar top section -->
			<div>
				<h1>Keyence Vision System</h1>
				<p>Logged in as <span id='header-user'>{{ current_user.username }}</span></p>
		
				{% set navigation_bar = [
					('index', 'Home'),
					('dashboard', 'Manage Users')
				] -%}
				{% set active_page = active_page|default('index') -%}
				<ul>
					{% for href, name in navigation_bar %}
						{% if href != 'dashboard' or (href == 'dashboard' and (current_user.is_authenticated and current_user.has_admin_rights())) %}
							<li><a href='{{ url_for(href|e) }}' {% if href == active_page %} class='active'{% endif %}>{{ name|e }}</a></li>
						{% endif %}
					{% endfor %}
				</ul>
			</div>
			
			<!-- Navbar bottom section -->
			<div>
				<!-- Log out -->
				{% if not current_user.is_anonymous %}
				<a id='header-logout' href="{{ url_for('logout') }}">Log out >></a>
				{% endif %}
			</div>

		</div>
		
	</header>
	
	{% endif %}

	<div id='content-wrapper'>

		{% if not no_header %}

		<!-- Status bar -->
		<div id='status-bar'>
			<label for='nav-btn'>&#9776;</label>
			<ul>
				<li></li>
				<li><p id='time' title='Local System Time'>00:00:00 AM - 1/1/1970</p></li>
			</ul>
		</div>
	
		{% endif %}

		<!-- Main content -->
		<div id='content-body'>
			<!-- Show flash messages -->
			{% with messages = get_flashed_messages() %}
			{% if messages %}
			<ul class='flash'>
				{% for message in messages %}
				<li>{{ message }}</li>
				{% endfor %}
			</ul>
			{% endif %}
			{% endwith %}

			{% block content %}{% endblock %}
		</div>
	</div>
	
</body>

</html>